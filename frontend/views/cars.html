<!-- views/cars.html -->
<div class="container mt-4">
  <h2 class="mb-3">Cars</h2>

  <!-- Car selection -->
  <div class="mb-3">
    <label for="carType" class="form-label">Choose a demo car:</label>
    <select id="carType" class="form-select">
      <option value="toyota">Toyota Corolla</option>
      <option value="audi">Audi A3</option>
      <option value="bmw">BMW 320i</option>
    </select>
  </div>

  <!-- Add button -->
  <button id="addDemoCar" class="btn btn-primary mb-4">Add Demo Car</button>

  <!-- Car list -->
  <div id="carList" class="mt-3"></div>

  <!-- Inline script so it only runs when this view is loaded -->
  <script>
    (function() {
      const demoCarsKey = 'demoCars';

      function renderCars() {
        const cars = JSON.parse(localStorage.getItem(demoCarsKey) || '[]');
        const list = document.getElementById('carList');
        list.innerHTML = '';

        if (cars.length === 0) {
          list.innerHTML = '<p>No cars added yet.</p>';
          return;
        }

        cars.forEach(car => {
          const item = document.createElement('div');
          item.className = 'card mb-2 p-2';
          item.innerHTML = `<strong>${car.make} ${car.model}</strong> 
            (${car.year}) â€” Plate: <em>${car.plate}</em>`;
          list.appendChild(item);
        });
      }

      document.getElementById('addDemoCar').addEventListener('click', () => {
        const type = document.getElementById('carType').value;
        const cars = JSON.parse(localStorage.getItem(demoCarsKey) || '[]');

        let newCar;
        if (type === 'toyota') {
          newCar = { id: Date.now(), make: 'Toyota', model: 'Corolla', year: 2020, plate: 'T-' + (cars.length + 1) };
        } else if (type === 'audi') {
          newCar = { id: Date.now(), make: 'Audi', model: 'A3', year: 2020, plate: 'A-' + (cars.length + 1) };
        } else if (type === 'bmw') {
          newCar = { id: Date.now(), make: 'BMW', model: '320i', year: 2021, plate: 'B-' + (cars.length + 1) };
        }

        cars.push(newCar);
        localStorage.setItem(demoCarsKey, JSON.stringify(cars));
        renderCars();
      });

      // Render existing cars on view load
      renderCars();
    })();
  </script>
</div>
